<html>
<head>

<!-- Make sure to change the title !!! -->

  <title>Matt McMunigle's Lab Notebook</title>
  <link rel="stylesheet" type="text/css" href="https://engineering.purdue.edu/ece477/MessageBoard/Lab_Notebook_Template.css" media="screen">

</head>
<body>

<!-- Make sure to change the name !!! -->

    <h1>Matt McMunigle's Notebook</h1>

    <h3 id="week01">Week 01</h3>

    <p class="entry"><b>January 15, 2014 (2 hour)</b>:<br>Met as a team to work on preliminary project proposal. 
    					Open source code was explored for projects similar to the proposed Every1 DJ design. </p>

    <p class="summary"><b>WEEK 01 SUMMARY</b><br>
                       <u>Accomplishments</u>: Submitted preliminary project proposal.<br>
                       <u>Weekly Work Total</u>: 2 hours<br>
                       <u>Project Work Total</u>: 2 hours</p>


    <h3 id="week02">Week 02</h3>
    
        <p class="entry"><b>January 22, 2013 (2 hour)</b>:<br>Created first draft of final project proposal. 
        Need to finalize PSSC and review draft with with team members. </p>
        
        <p class="entry"><b>January 23, 2013 (1.5 hour)</b>:<br>Began searching online for possible onboard
        computers to fill the need of our project. Initial decision was
        <a href="http://www.raspberrypi.org/">Raspberry Pi.</a> Documentation was reviewed to understand the
        capabilities and requirements of the rpi.   </p>      

    <p class="summary"><b>WEEK 02 SUMMARY</b><br>
                       <u>Accomplishments</u>: Submitted final project proposal<br>
                       <u>Weekly Work Total</u>: 3.5 hours<br>
                       <u>Project Work Total</u>: 6.5 hours</p>
                       
    <h3 id="week03">Week 03</h3>
		<p class="entry"><b>January 28, 2013 (2 hour)</b>:<br>Started Homework 2, PCB design exercise.
		During this activity a switching power supply circuit was duplicated using the National Semiconductor 
		LM2675. The transition from schematic to board proved difficult and needed the assistance of TA to complete. </p>

		<p class="entry"><b>January 39, 2013 (1.5 hour)</b>:<br> During weekly lab final PSSC's were informallly accepted. 
		A Raspberry Pi was ordered and should arrive within two days.</p>	
		
		<p class="entry"><b>January 30, 2013 (1 hour)</b>:<br>Homework 2 was completed with the help of the TA. </p>	
		
    <p class="summary"><b>WEEK 03 SUMMARY</b><br>
                       <u>Accomplishments</u>: Homework 2 - PCB Design <br>
                       <u>Weekly Work Total</u>: 4.5 hours<br>
                       <u>Project Work Total</u>: 11 hours</p>
   
               
    <h3 id="week04">Week 04</h3>
       		<p class="entry"><b>February 6, 2013 (1.5 hour)</b>:<br> Team meeting was held to complete Homework 3. 
   		During the meeting parts were decided upon and the majority of the assignment was completed. </p> 
   		
   		   	<p class="entry"><b>February 8, 2013 (3 hour)</b>:<br> Received Raspberry Pi from teammate and began
   		   	steps to load an OS. <a href="http://www.raspberrypi.org/downloads">New Out Of Box Software (NOOBS)</a> 
   		   	was loaded onto the formated SD card. <a href="http://www.raspbian.org/Raspbian"> Raspbian OS</a> was chosen based
   		   	on user reviews, capabilities and documentation. The OS was then installed and the RPI became functional!
   		   	The wifi configuration was modified and some time was spent exploring the existing applications. A HDMI to VGA
   		   	converter was purchased to avoid having to use living room tv. A USB hub was also purchased to allow a mouse and
   		   	keyboard to be used while the wifi dongle is attached.</p>   

    <p class="summary"><b>WEEK 04 SUMMARY</b><br>
                       <u>Accomplishments</u>: Completed Homework 3 and Raspberry Pi has OS loaded<br>
                       <u>Weekly Work Total</u>: 4.5 hours<br>
                       <u>Project Work Total</u>: 15.5 hours</p>
                       
                      
    <h3 id="week05">Week 05</h3>
       	
       		<p class="entry"><b>February 12, 2013 (2 hour)</b>:<br> During the required lab we reviewed our progress with Homework 4 and continued to finalized our parts list. 
       		It was pointed out by the TA's that the parts list was missing components related to power. After the discussion regulators and a power
       		supply were added to the list. Some components have been added and others will continue to be purchased. </p> 
       		
       		<p class="entry"><b>February 14, 2013 (1.5 hour)</b>:<br>  Homework 4 was thoroughly reviewed and modified after receiving some negative feedback on Homework 3.
       		Once the team was satisfied with the report and it had been turned in the attention was shifted to the test board provided by Joe. 
       		Time was spent reviewing a tutorial and online help for the MPLAB IDE. Unfortunately we did not have a power supply for the micro
       		during this time so there wasn't much of an accomplishment. The short term goal is communicate between the Raspberry Pi and Micro through
       		serial. </p> 
       		
       		<p class="entry"><b>February 15, 2014 (3 hours)</b>:<br>
      		After receiving the correct power supply from Joe it was time to set up the MPLAB IDE and attempt to run a test program on the micro.
      		Most of this time was spent reading online help forums trying to get the IDE to compile a program and recognize the MPLAB ICD 3 in-circuit debugger.
      		It was discovered that a separate C compiler must be installed and selected, instead of coming with the program as expected. The issue with the ICD 3
      		turned out to be diver incompatibility between different versions of the MPLAB ICD software. Finally, a test program was compiled and programmed on the micro.<br>
   		
    <p class="summary"><b>WEEK 05 SUMMARY</b><br>
                       <u>Accomplishments</u>: Homework 4 submitted <br>
                       <u>Weekly Work Total</u>: 6.5 hours<br>
                       <u>Project Work Total</u>: 22</p>
                       
    
    <h3 id="week06">Week 06</h3>
    
    <p class="entry"><b>February 19, 2014 (2.5 hours)</b>:<br>
      During mandatory lab session there were discussions with the course staff regarding the schematic and Homework 5 as a whole. 
      Work continued on the hardware narrative homework and individual sections were assigned within the group. Continuing from the success of
      getting MPLAB IDE successfully working the team created a test program to blink the LED's on the PIC development board. This may not be a huge
      accomplishment but it was exciting to finally see the microcontroller perform some 'action'. <br>
    	<a href="../images/mmcmunig/PIC_LED.JPG">
      		<img src="../images/mmcmunig/PIC_LED.JPG" alt="PIC Blinky" height="200px" width="200px">
        </a> <br>
    </p>

	<p class="entry"><b>February 19, 2014 (2 hours)</b>:<br>
	  Continued to work on Homework 5, hardware narrative. This included research on the communication data rates available between the microcontroller
	  and other components such as <a href="http://raspberrypi.stackexchange.com/questions/699/what-spi-frequencies-does-raspberry-pi-support">Raspberry Pi</a>
	   and the <a href="http://www.nxp.com/documents/data_sheet/PCA9626.pdf">LED Driver</a>. 

    <p class="entry"><b>February 21, 2014 (4 hours)</b>:<br>
      A team meeting was held to continue progress on the hardware narrative report. Much of the time was dedicated to coming to a consensus
      regarding the port assignments for each of the subsystems. It was decided that the internal oscillator would be used for the microcontroller
      and a frequency of 4MHz was chosen. Using scalers the appropriate clock speed will be attained for each of the peripherals. 
    </p>
    
    <p class="entry"><b>February 22, 2014 (2 hours)</b>:<br>
      Research was conducted to better understand the steps necessary to successfully stream a song using the GrooveShark API.
      It was discovered that Grooveshark is pretty strict on their licensing laws:
      <a href="http://developers.grooveshark.com/tuts/streaming">Grooveshark Streaming</a>. and an API key was requested. <br>
    
    <p class="entry"><b>February 22, 2014 (2 hours)</b>:<br>
      The Raspberry Pi was set up at the team station for our first test of the SPI ports. After once again struggling
      with the wifi adapter for the RaspberryPi an ethernet connection was established and the github repository was
      successfully cloned on the rpi. Using the SPI python walkthrough provided by  <a href="http://www.100randomtasks.com/simple-spi-on-raspberry-pi">100randomtasks.com</a>
      the serial ports showed some activity. No specific values were successfully read or written but that is the next goal.

    <p class="summary"><b>WEEK 06 SUMMARY</b><br>
                       <u>Accomplishments</u>: Homework 5 completed and Raspberry Pi SPI is talking<br>
                       <u>Weekly Work Total</u>: 12.5 hours<br>
                       <u>Project Work Total</u>: 34.5 hours</p>


    <h3 id="week07">Week 07</h3>

    <p class="entry"><b>February 24, 2014 (4 hours)</b>:<br>
      SPI successful, scoped (img here)
      Overcame a while loop stuck in a lib function, we just wrote our own listening code
      More problems with the damn IDE toolchain
      Soldered a prototyping connector to connect micro jumper port and Rpi header pins

    <p class="entry"><b>February 24, 2014 (3 hours)</b>:<br>
      The focus of today's work session was once again to communicate between the microcontroller and the Raspberry Pi using SPI. 
      After confirming that the Raspberry Pi must be the master in the SPI master slave interface, a successful array of data was sent
      from the raspberry pi to the microcontroller and stored in a buffer. The signals were viewed using a logic analyzer to confirm the correct
      clock rate (62.5MHz) and the data being sent. <br>
      The setup that was used to test SPI communications:
      <br>
      <a href="../images/jefferst/2014-02-25-serial-comm-ckt.jpg">
	<img src="../images/jefferst/2014-02-25-serial-comm-ckt.jpg" alt="serial comm" height="200px" width="200px">
      </a> <br>      
      

  <p class="entry"><b>February 25, 2014 (3 hours)</b>:<br>
      Since the Rpi SPI was not operating correctly, a quick search was performed for alternatives for SPI
      driving code. The python example was abandoned, and a C programming example was discovered (linked within) from the following
      blog <a href="http://www.brianhensley.net/2012/07/getting-spi-working-on-raspberry-pi.html">tutorial</a>.<br>
      At this point, Rpi SPI was scoped alone; SUCCESS! See the code and initial results here:<br>
      <a href="../images/jefferst/2014-02-25-serial-rpi.jpg">
	<img src="../images/jefferst/2014-02-25-serial-rpi.jpg" alt="rpi" height="200px" width="200px">
      </a> 
      <a href="../images/jefferst/2014-02-25-rpi-serial-code.jpg">
	<img src="../images/jefferst/2014-02-25-rpi-serial-code.jpg" alt="code" height="200px" width="200px">
      </a> <br>
      Some additional code was authored to display (on the microcontroller) multi-byte transmissions from the Rpi.
      In addition, clock frequencies were matched to facilitate what will eventually be bidirectional communication.
      See evidence of frequency (62.5KHz) matching here:<br>
      <a href="../images/jefferst/2014-02-25-rpi-adjusted-freq.jpg">
	<img src="../images/jefferst/2014-02-25-rpi-adjusted-freq.jpg" alt="code" height="200px" width="200px">
      </a> <br>
      This experiment was successful! (Multiple transmissions, one way: Rpi -> micro)
      It was briefly noted that since Rpi SPI peripherals are all master-mode hardware, a switching
      protocol must be developed in software on the micro side so that it may
      operate in Master or Slave mode as appropriate to each SPI peripheral (Rpi, LCD).
    </p>

    <p class="entry"><b>February 26, 2014 (4 hours)</b>:<br>
      Mandatory Lab was held. Descussion centered around streaming API selection and different options. Tinysong
      (the current metadata API) returns a link to Grooveshark flash music player, but that will not suffice for 
      Rpi streaming due to system incompatibilites. Grooveshark's streaming API would be the best option, but
      it is unclear whether API key access will be granted. Should the Grooveshark API prove inaccessible, 
      two main alternatives methods were selected, in order of team preference:<br>
      - Anonymizing Grooveshark API calls with TOR to allow for previously issued keys to be reused<br>
      - Downloading youtube videos, ripping out audio on the fly, and playing from disk
    </p>

    <p class="entry"><b>February 27, 2014 (6 hours)</b>:<br>
      Upon inspection of the existing PCB layout, it was determined that all of the different voltages (3.3V, 5V, 12V) were connected together in the schematic and the PCB board. 
      This turned out to be a huge fix since nearly every power and ground trace need to be re-routed. The trace widths were changed for all power and 
      ground signals since previously they had all been set to 12 mil which is much to small for the amount of current required. It was discovered that 
      we had no connector for the power supply so the appropriate 3.5mm female connector was found in eagle and added to the layout. <br>
      The PCB board at the conclusion of the days work: <br>
      <a href="../images/mmcmunig/PCB_2_27.JPG">
	<img src="../images/mmcmunig/PCB_2_27.JPG" alt="block" height="200px" width="200px">      
    </p>

    <p class="entry"><b>February 28, 2014 (8 hours)</b>:<br>
      Today's session resulted in the completion of the initial PCB layout and the submission of homework 6 (PCB Layout).
      From the existing layout, many changes were made. Among the highlights are:<br>
      - Switching from BJT motor control circuitry to the <a href="http://www.ti.com/lit/ds/symlink/l293d.pdf">L239D Motor Driver</a> IC<br>
      - Reassigning several incorrect pin assignments from the microcontroller to the LED driver<br>
      - Changing to a 6-pin RJ-11 connector and routing programming pins correctly<br>
      - Routing power and ground to microcontoller bypass capacitors<br>
      - Creating all power and ground planes<br>
      The report for homework #6 was completed in parallel to the PCB layout activities.
      See a first-revision PCB layout here:<br>
      <a href="../images/jefferst/2014-03-01-PCB-layout.png">
	<img src="../images/jefferst/2014-03-01-PCB-layout.png" alt="block" height="200px" width="200px">
      </a> <br>
    </p>

    <p class="entry"><b>March 1, 2014 (1 hours)</b>:<br>
      A brief team meeting was held today to divide Design Review presentation subtasks.
    </p>

    <p class="summary"><b>WEEK 07 SUMMARY</b>
      <u>Accomplishments</u>: Homework 6 - PCB Layout<br>
      Meaningful communication one-way on SPI<br>
      PCB Layout<br>
      <u>Weekly Work Total</u>: 29 hours<br> 34.5
      <u>Project Work Total</u>: 63.5 hours<br>
    </p>

    <h3 id="week08">Week 08</h3>    

    <p class="entry"><b>March 2, 2014 (1.5 hours)</b>:<br>
      Design review slides and presentation prep
    </p>
    

    <p class="entry"><b>March 3, 2014 (7 hours)</b>:<br>
      filled rx buffer, but now reading and writing at the same time is hard
      concurrency of SPI and streaming/web code will be an issue
      successfully have bidirectional SPI, now trying to get meaningful operation (simulate real spi messages)
      no way to distinguish bt Rx and Tx at interrupt level
      presenation practice
      reworked schematic
      - put 0 ohm res bt agnd and gnd
      - added series resistors on LED driver
      - RJ-11 con - used MPlab reference for pin connections
      - sought replacement for power supply - current requirements
      
      4 hours
      Made part for power supply, added to pcb board
      routed all new signals/parts
      increased trace lengths for power and ground. 
    </p>

    <p class="entry"><b>March 4, 2014 (2 hours)</b>:<br>
      Design review practice and team meeting to discuss feedback from course staff and peers. 
    </p>

    <p class="entry"><b>March 5, 2014 (3 hours)</b>:<br>
      Updated PCB board with parts and connections that changed as a result of the design review. The ground plane that had
      been created was not named appropriately and therefore was not actually connected to ground. This was fixed as well as adding 
      rank to different planes in order to avoid overlapping. 
    </p>
    
    <p class="entry"><b>March 6, 2014 (3 hours)</b>:<br>
      Power components continue to change as we find new requirements that had previously been overlooked. The footprint of the bulk capacitors were
      much too small
      Audio drivers were installed on the Raspberry Pi. A few settings such as output volume and output device were modified. The audio originally
      is set to output from HDMI and this was changed to analog output. A wav file was downloaded and successfully played on powered speakers.
      When the oscilloscope was set up to view the output on headphone wires nothing but noise was heard. 
    </p>
                      
    <p class="entry"><b>March 8, 2014 (1 hours)</b>:<br>
      Went in with Courtney to discuss a few concerns with Joe. The audio amplifier design was modified in order to regulate the negative feedback.
      The footprint of a few power components (capacitor and inductor) were determined to be too small and will need to be changed.
    </p>  

    <p class="entry"><b>March 8, 2014 (2.5 hours)</b>:<br>
      Set up test circuit for LCD testing. Online documentation on the NHD-2.23-12832UCB3 is limited but some source
      code was found that provided the initialization sequence necessary to turn the LCD on and send data. 
    </p>  
    
    <h3 id="week08">Week 08</h3>

    <p class="summary"><b>WEEK 08 SUMMARY</b><br>
                       <u>Accomplishments</u>: <br>
                       <u>Weekly Work Total</u>: 19 hours<br>
                       <u>Project Work Total</u>: 82.5 hours</p>


    <h3 id="week09">Week 09</h3>

    <p class="entry"><b>March 9, 2014 (5 hours)</b>:<br>
      Worked on getting LCD to turn on and display anything. Was able to briefly get some random pixels to light
      up but even this stopped working. Each command was analyzed using the oscilloscope and appear to be sent correctly
      and in the right order. Later in the day the LCD was successfully initialized and data was displayed.
    </p>
    
    <p class="entry"><b>March 11, 2014 (5 hours)</b>:<br>
      The schematic was updated with the final power and audio circuitry components. The component changes included
      using one stepper voltage regulator for 12V to 5V and one LDO for 5V to 3.3V. All of the bulk capacitors had been
      changed to correctly match the part footprint. The diodes were changed to surface mount. <br>
      Once these parts had been finalized on the schematic the board routing began. The layout of the voltage regulator
      followed the data sheet recommendation as closely as possible. The audio circuitry was kept compact and separate
      from the other components due to it having and anlog ground. The trace widths for power and ground were kept wide to 
      avoid overheating with the high current requirements. Vias were added to connect the ground plans on the top and 
      bottom. 
    </p>

    <p class="entry"><b>March 12, 2014 (2 hours)</b>:<br>
      During lab the current status of the PCB board and schematic were discussed with the course staff. Overall the results
      were positive. A few small changes were made including removing acute angles and adding a hole for a stabilizing piece
      on the underside of the dc power jack.  
    </p>
    
    <p class="entry"><b>March 13, 2014 (1 hours)</b>:<br>
      Submitted board to the online check. There was an issue of a hole being too close to the ground plane. This issue
      was resolved and resubmitted through the online checker.   
    </p>
    
    <p class="entry"><b>March 14, 2014 (0.5 hours)</b>:<br>
      Went to the lab to finish the required checkoffs before submitting the PCB design. This included sending the course
      staff a .zip file of all the pcb files and board dimensions.
    </p>
    
    <p class="summary"><b>WEEK 09 SUMMARY</b><br>
                       <u>Accomplishments</u>: <br>
                       <u>Weekly Work Total</u>: 13.5 hours<br>
                       <u>Project Work Total</u>: 96  hours</p>
                       
                       
    <h3 id="week10">Week 10</h3>

    <p class="summary"><b>WEEK 10 SUMMARY</b><br>
                       <u>Accomplishments</u>: <br>
                       <u>Weekly Work Total</u>:  hours<br>
                       <u>Project Work Total</u>:  hours</p>
                       
    
    <h3 id="week11">Week 11</h3>

    <p class="summary"><b>WEEK 11 SUMMARY</b><br>
                       <u>Accomplishments</u>: <br>
                       <u>Weekly Work Total</u>:  hours<br>
                       <u>Project Work Total</u>:  hours</p>
                       
                      
    <h3 id="week12">Week 12</h3>

    <p class="summary"><b>WEEK 12 SUMMARY</b><br>
                       <u>Accomplishments</u>: <br>
                       <u>Weekly Work Total</u>:  hours<br>
                       <u>Project Work Total</u>:  hours</p>
                       
    
    <h3 id="week13">Week 13</h3>

    <p class="summary"><b>WEEK 13 SUMMARY</b><br>
                       <u>Accomplishments</u>: <br>
                       <u>Weekly Work Total</u>:  hours<br>
                       <u>Project Work Total</u>:  hours</p>


    <h3 id="week14">Week 14</h3>

    <p class="summary"><b>WEEK 14 SUMMARY</b><br>
                       <u>Accomplishments</u>: <br>
                       <u>Weekly Work Total</u>:  hours<br>
                       <u>Project Work Total</u>:  hours</p>
                       
    
    <h3 id="week15">Week 15</h3>

    <p class="summary"><b>WEEK 15 SUMMARY</b><br>
                       <u>Accomplishments</u>: <br>
                       <u>Weekly Work Total</u>:  hours<br>
                       <u>Project Work Total</u>:  hours</p>


    <h3 id="week16">Week 16</h3>

    <p class="summary"><b>WEEK 16 SUMMARY</b><br>
                       <u>Accomplishments</u>: <br>
                       <u>Weekly Work Total</u>:  hours<br>
                       <u>Project Work Total</u>:  hours</p>                           

<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	END OF NOTEBOOK SECTION, BEGIN NAVBAR.  Do not change anything beyond this point.
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
-->
  <div id="navbar">
    <p>
      <b>DIRECTORY</b><br><br>
      <a href="#week01">Week 01</a><br>
      <a href="#week02">Week 02</a><br>
      <a href="#week03">Week 03</a><br>
      <a href="#week04">Week 04</a><br>
      <a href="#week05">Week 05</a><br>
      <a href="#week06">Week 06</a><br>
      <a href="#week07">Week 07</a><br>
      <a href="#week08">Week 08</a><br>
      <a href="#week09">Week 09</a><br>
      <a href="#week10">Week 10</a><br>
      <a href="#week11">Week 11</a><br>
      <a href="#week12">Week 12</a><br>
      <a href="#week13">Week 13</a><br>
      <a href="#week14">Week 14</a><br>
      <a href="#week15">Week 15</a><br>
      <a href="#week16">Week 16</a><br>
    </p>
  </div>
</body>
</html>

